<!DOCTYPE html>
<!--
Verify that the JavaScript imports for Mermaid and the Sphinx/Mermaid ELK layout wrapper exist.

LLM Disclosure:  Entirely generated by OpenAI ChatGPT 5 with human tests for correctness.
-->
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mermaid Import Diagnostic</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    padding: 2rem;
    background: #f8f9fa;
    color: #222;
  }
  .status {
    padding: 0.5rem 1rem;
    border-radius: 6px;
    margin-bottom: 1rem;
    display: inline-block;
  }
  .ok { background: #d1e7dd; color: #0f5132; }
  .fail { background: #f8d7da; color: #842029; }
  pre {
    background: #eee;
    padding: 0.5rem;
    border-radius: 4px;
    overflow-x: auto;
  }
</style>
</head>
<body>
<h1>Mermaid Module Import Diagnostic</h1>
<div id="mermaid-status" class="status">Checking mermaid...</div><br>
<div id="elk-status" class="status">Checking layout-elk...</div>

<pre id="log"></pre>

<script type="module">
(async () => {
  const log = (msg) => {
    console.log(msg);
    document.querySelector('#log').textContent += msg + '\n';
  };

  const testImport = async (name, url, elId) => {
    const el = document.getElementById(elId);
    try {
      log(`Importing ${name} from ${url}`);
      const mod = await import(url);
      if (mod) {
        el.textContent = `✅ ${name} loaded successfully`;
        el.classList.add('ok');
        log(`✅ ${name} imported successfully.`);
        return mod;
      }
      throw new Error('No module export returned');
    } catch (err) {
      el.textContent = `❌ Failed to load ${name}: ${err.message}`;
      el.classList.add('fail');
      log(`❌ ${name} error: ${err.stack || err}`);
      return null;
    }
  };

  const mermaid = await testImport(
    'mermaid',
    'https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs',
    'mermaid-status'
  );

  const elkLayouts = await testImport(
    'layout-elk',
    'https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.2.0/dist/mermaid-layout-elk.esm.min.mjs',
    'elk-status'
  );

  if (mermaid && elkLayouts) {
    try {
      mermaid.registerLayoutLoaders(elkLayouts);
      mermaid.initialize({ startOnLoad: false });
      log('✅ Both modules initialized successfully.');
    } catch (err) {
      log(`⚠️ Initialization failed: ${err.message}`);
    }
  }
})();
</script>
</body>
</html>
